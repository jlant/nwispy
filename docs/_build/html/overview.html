<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Overview &mdash; nwispy 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="nwispy 1.0.0 documentation" href="index.html" />
    <link rel="next" title="Code Documentation" href="code.html" />
    <link rel="prev" title="Welcome to nwispy’s documentation!" href="index.html" /> 
  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="index.html"><img src="_static/logo.png" border="0" alt="py4sci"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="code.html" title="Code Documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to nwispy’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">home</a>|&nbsp;</li>
        <li><a href="search.html">search</a>|&nbsp;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Overview</a><ul>
<li><a class="reference internal" href="#author">Author</a></li>
<li><a class="reference internal" href="#version">Version</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#command-line-interface">Command line interface</a></li>
<li><a class="reference internal" href="#simple-uml-diagram">Simple UML diagram</a></li>
<li><a class="reference internal" href="#general-instructions">General Instructions</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#download">Download</a></li>
<li><a class="reference internal" href="#installation-instructions">Installation Instructions</a></li>
<li><a class="reference internal" href="#in-the-works">In the Works</a></li>
<li><a class="reference internal" href="#disclaimer-and-notice">Disclaimer and Notice</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to nwispy&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="code.html"
                        title="next chapter">Code Documentation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/overview.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="author">
<h2>Author<a class="headerlink" href="#author" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre>Jeremiah Lant
Hydrologist
U.S. Geological Survey
Kentucky Water Science Center
Louisville, Kentucky 40299
502-493-1949
jlant@usgs.gov
</pre></div>
</div>
</div>
<div class="section" id="version">
<h2>Version<a class="headerlink" href="#version" title="Permalink to this headline">¶</a></h2>
<p>1.0.0</p>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p><em>nwispy</em> is a command line tool for analysing U.S. Geological Survey (USGS) water resource data
collected nationwide on rivers and streams by USGS gages and instruments. The National Water
Information System (NWIS) is the Nation&#8217;s principal repository of water resources data.  Most NWIS
data can be accessed directly at:</p>
<p><a class="reference external" href="http://waterdata.usgs.gov/nwis/">http://waterdata.usgs.gov/nwis/</a></p>
<p>and for real-time data for surface water, ground water, or water-quality data:</p>
<p><a class="reference external" href="http://waterdata.usgs.gov/nwis/rt">http://waterdata.usgs.gov/nwis/rt</a></p>
<p>Some sample highlights include:</p>
<ul class="simple">
<li>Processes USGS NWIS data files</li>
<li>Generates and saves plots of all parameters found in USGS NWIS data files</li>
<li>Retrieves and processes NWIS data files using USGS web services</li>
<li>Logs erroneous data found in NWIS data files</li>
<li>Unix friendly</li>
</ul>
<p><em>nwispy</em> can read, process, plot, and print data and information from NWIS daily, instantaneous (real-time),
and/or site data files. The NWIS data files can come from any USGS site nationwide and can contain any
number of parameters (discharge, gage height, temperature, precipitation, sediment concentration,
turbidity, depth to water level, etc.).  Time-series plots are automatically created and saved for all
parameters displaying relevant statistics (mean, maximum, and minimum) with detailed axes and title descriptions.</p>
<p><em>nwispy</em> has web service capability to automatically retrieve and process NWIS data files based on a tab-delimited
user request file. Details of the USGS web services can be accessed at:</p>
<p><a class="reference external" href="http://waterservices.usgs.gov">http://waterservices.usgs.gov</a></p>
<p>Please see <a class="reference internal" href="#general-instructions"><em>General Instructions</em></a> for details on <em>nwispy</em>&#8216;s web service capability.</p>
<p><em>nwispy</em> automatically tracks, notifies user about, and creates a log file called <em>warn.log</em> that specifies for
the user missing or erroneous data values contained in NWIS data file(s).  The <em>warn.log</em> file is only created if
missing or erroneous data values are found.  In addition, if a web service error or any other application wide
error occurs, a file called <em>exception.log</em> is created containing the details of the error.  To help solve the error
the <em>exception.log</em> can be emailed to the author.  Please see <a class="reference internal" href="#general-instructions"><em>General Instructions</em></a> for details on error logging.</p>
<p><em>nwispy</em> is written in Python and has been built to be a &#8220;Unix friendly&#8221; tool, meaning it can be placed anywhere
along a Unix pipeline. <em>nwispy</em> has a help menu that lists the current command line arguments/options that can be
passed to <em>nwispy</em>. At this time, users can run <em>nwispy</em> using a shell with the appropriate flags to process NWIS
files either stored locally on a user&#8217;s machine or <em>nwispy</em> can retrieve and process files from the web based on
a user request file.Please see <a class="reference internal" href="#general-instructions"><em>General Instructions</em></a> for details on how to use nwispy.</p>
<p id="gallery">For sample images, please visit the <a class="reference internal" href="gallery.html"><em>Gallery</em></a>.</p>
<p>For upcoming developments, please see <a class="reference internal" href="#in-the-works"><em>In the Works</em></a>.</p>
</div>
<div class="section" id="command-line-interface">
<h2>Command line interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h2>
<img alt="_images/nwispy-interface.png" src="_images/nwispy-interface.png" />
</div>
<div class="section" id="simple-uml-diagram">
<h2>Simple UML diagram<a class="headerlink" href="#simple-uml-diagram" title="Permalink to this headline">¶</a></h2>
<img alt="_images/nwispy-uml-diagram.png" src="_images/nwispy-uml-diagram.png" />
</div>
<div class="section" id="general-instructions">
<span id="id1"></span><h2>General Instructions<a class="headerlink" href="#general-instructions" title="Permalink to this headline">¶</a></h2>
<p>To use <em>nwispy</em>, users will use a shell to execute <em>nwispy</em> with the appropriate flags to process files
stored on the user&#8217;s machine. To be implemented soon is a web service to NWIS. Please see <em>IN THE WORKS*</em>.
Plots are automatically generated and saved to an directory named <em>output-filename</em>.  An error log called
<em>error.log</em> that logs any errors found in the data file, such as missing data values, is automatically
generated and saved to the same directory that the plots are saved in.</p>
<p><strong>Help -h flag</strong></p>
<p>The -h flag spawns a help menu with all the flag options.</p>
<p><strong>File(s) -f flag</strong></p>
<p>The -f flag specifies a file or files to process.</p>
<p>To process a single NWIS data file the general syntax is:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python nwispy.py -f path/to/file
</pre></div>
</div>
<p>The above commands will create an output directory with the following contents:</p>
<div class="highlight-python"><div class="highlight"><pre>output-filename/
                                *.png           # plots of each parameter in the data file
                                ...
                                *.png
</pre></div>
</div>
<p>If the data file processed contains any missing or erroneous data values, then a file
called <em>warn.log</em> is created and placed in the output-filename directory for the user
to review.  The <em>warn.log</em> file specifies what issues were found in the file.</p>
<p>For example, using data contained in this repository&#8217;s data directory:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python nwispy.py -f ../data/datafiles/03290500_dv.txt
</pre></div>
</div>
<p>will produce the following output directory:</p>
<div class="highlight-python"><div class="highlight"><pre>output-03290500_dv/
                                USGS 03290500 - Discharge, cubic feet per second (MEAN).png
</pre></div>
</div>
<p>and:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python nwispy.py -f ../data/datafiles/03287500_dv.txt
</pre></div>
</div>
<p>will produce the following output directory:</p>
<div class="highlight-python"><div class="highlight"><pre>output-03287500_uv/
                                USGS 03287500 - Discharge, cubic feet per second (MEAN).png
                                USGS 03287500 - Gage height, feet.png
                                USGS 03287500 - Precipitation, total, inches.png
                                USGS 03287500 - Temperature, water, degrees Celsius.png
                                warn.log
</pre></div>
</div>
<p>To process a multiple NWIS data files the general command syntax is:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python nwispy.py -f file1 file2 file3
</pre></div>
</div>
<p><strong>File Dialog -fd flag</strong></p>
<p>The -fd flag spawns a file dialog box for users to choose files:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python nwispy.py -fd
</pre></div>
</div>
<p>The above command syntax will create an output directory in the same manner as the -f flag.</p>
<p><strong>Plot -p flag</strong></p>
<p>The -p flag shows plots to the screen for the user to analyse and query:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python nwispy.py -fd -p
</pre></div>
</div>
<p>OR:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python nwispy.py -f file.txt -p
</pre></div>
</div>
<p>The above command syntax will create an output directory in the same manner as the -f flag.</p>
<p><strong>Verbose -v flag</strong></p>
<p>The -v flag prints data file information, such as the type of parameters found, to the screen for the user.</p>
<blockquote>
<div>$ python nwispy.py -f file.txt -v</div></blockquote>
<p>The above command syntax will create an output directory in the same manner as the -f flag.</p>
<p><strong>Unix Friendly</strong></p>
<p>Users can place <em>nwispy</em> along a Unix pipeline.  For example, <em>nwispy</em> can accept standard input:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cat file.txt | nwispy.py
</pre></div>
</div>
<p>OR:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cat file.txt | nwispy.py -p -v
</pre></div>
</div>
<p><strong>Web Service -web flag</strong></p>
<p>The -web flag retrieves data files through the USGS NWIS web service based upon a user created tab-delimited <em>requests.txt</em> file:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python nwispy.py -web path/to/requests-file.txt
</pre></div>
</div>
<p>The above commands will create an output directory called <em>requests-file-datafiles</em> which will contain timestamped downloaded
NWIS data file(s) and an output directory for each downloaded file containing the plots of each parameter requested and a
<em>warn.log</em> if erroneous data values are found.</p>
<p>Example tab-delimited <em>requests.txt</em> files are shown below:</p>
<p><em>request_single_gage.txt</em></p>
<img alt="_images/request_single_gage.png" src="_images/request_single_gage.png" />
<p><em>request_multiple_gages.txt</em></p>
<img alt="_images/request_multiple_gages.png" src="_images/request_multiple_gages.png" />
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Unit tests for <em>nwispy</em> were written using the nose library (<a class="reference external" href="https://nose.readthedocs.org/en/latest/">https://nose.readthedocs.org/en/latest/</a>), and
are contained in the <em>tests</em> directory.  <em>nwispy</em> can be unit tested by typing the <strong>nosetests</strong> command at
the <em>nwispy</em> project level directory (one directory above the <em>tests</em> directory):</p>
<div class="highlight-python"><div class="highlight"><pre>$ pwd
/your-path/nwispy

$ nosetests
</pre></div>
</div>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre>python == 2.7.5
numpy == 1.7.1
matplotlib == 1.2.1
nose == 1.3.0
</pre></div>
</div>
</div>
<div class="section" id="download">
<h2>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/jlant-usgs/nwispy">https://github.com/jlant-usgs/nwispy</a></p>
</div>
<div class="section" id="installation-instructions">
<h2>Installation Instructions<a class="headerlink" href="#installation-instructions" title="Permalink to this headline">¶</a></h2>
<p>Instructions coming soon.</p>
</div>
<div class="section" id="in-the-works">
<span id="id2"></span><h2>In the Works<a class="headerlink" href="#in-the-works" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Improvement to the <em>nwispygui.py</em> code to allow users to interact and query plots.</li>
</ul>
</div>
<div class="section" id="disclaimer-and-notice">
<h2>Disclaimer and Notice<a class="headerlink" href="#disclaimer-and-notice" title="Permalink to this headline">¶</a></h2>
<p>Please refer to the USGS Software User Rights Notice (LICENSE.txt or <a class="reference external" href="http://water.usgs.gov/software/help/notice/">http://water.usgs.gov/software/help/notice/</a>)
for complete use, copyright, and distribution information. The USGS provides no warranty, expressed or implied, as to the
correctness of the furnished software or the suitability for any purpose. The software has been tested, but as with any
complex software, there could be undetected errors. Users who find errors are requested to report them to the USGS.</p>
<p>References to non-USGS products, trade names, and (or) services are provided for information purposes only and do not
constitute endorsement or warranty, express or implied, by the USGS, U.S. Department of Interior, or U.S. Government, as to
their suitability, content, usefulness, functioning, completeness, or accuracy.</p>
<p>Although this program has been used by the USGS, no warranty, expressed or implied, is made by the USGS or the United
States Government as to the accuracy and functioning of the program and related program material nor shall the fact of
distribution constitute any such warranty, and no responsibility is assumed by the USGS in connection therewith.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="code.html" title="Code Documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to nwispy’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">home</a>|&nbsp;</li>
        <li><a href="search.html">search</a>|&nbsp;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Jeremiah Lant.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.1.
    </div>
  </body>
</html>